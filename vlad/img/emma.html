<html>
<head>
    <title> ‚≠í‚ú©Vorbeste in imagini‚ú©‚≠í</title>
    <meta charset="UTF-8">
    <style>
        body {
            margin: 0.5%;
        }

        button {
            cursor: pointer;
            font-size: 20pt;
        }

        #text {
            font-size: 25pt;
            padding: 5pt;
            width: 100%;
        }

        #bottom-button-bar {
            width: 100%;
            text-align: center;
            position: absolute;
            bottom: 0
        }

        #bottom-button-bar button {
            background-color: transparent;
        }

        :fullscreen, ::backdrop {
            background-color: rgba(255, 255, 255, 0);
            padding: 8px;
        }

        button.backspace {
            position: absolute;
            height: 41pt;
            width: 80pt;
            right: 0;
            margin-right: 0.5%;
        }

        div#canvas {
            background: white;
        }

        div#canvas img, div#images img {
            /*width: 12.5%;*/
            width: 16.66%;
            display: inline-block;
            box-sizing: border-box;
            border: 5px solid lightgrey;
        }

    </style>
</head>
<body>
<div id="bottom-button-bar">
    <button autofocus id="fullscreen-button" onclick="document.body.requestFullscreen(); this.style.display='none';">
        Fullscreen
    </button>
    <button onclick="speakText()"> Speak üó£Ô∏è</button>
</div>
<input id="text" readonly="readonly" type="text"/>
<button class="backspace" onclick="stergeCuvant()" onmousedown="onStergeDown()"> ‚å´</button>
<br>
<div id="canvas">

</div>
<div id="images">

</div>


<!--<img src="bed.png" onerror="errors.push(src)">-->

<script>
    const itemsPerPage = 18;
    const topItems = [
        {
            img: 'eat.jpg', text: 'vreau sƒÉ mƒÉn√¢nc', children: [
                {img: 'banana.jpg', text: 'bananƒÉ'},
                {img: 'sticks.jpg', text: 'sticks'},
                {img: 'lays.jpg', text: 'lays'},
                {img: 'pomber.jpg', text: 'pomber'},
                {img: 'eggs.jpg', text: 'ouƒÉ'},
                {img: 'bread-butter.png', text: 'paine cu unt'},
                {img: 'grape.jpg', text: 'struguri'},
                {img: 'apple.jpg', text: 'mƒÉr'},
                {img: 'soup.jpg', text: 'supa'},
                {img: 'blueberry.jpg', text: 'afine'},
                {img: 'pure.png', text: 'piure'},
                {img: 'pasta.png', text: 'paste'},
                {img: 'pizza.png', text: 'pizza'},
                {img: 'strawberry.png', text: 'capsuni'},
                {img: 'iogurt.png', text: 'iogurt'},
            ]
        },
        {
            img: 'drink.jpg', text: 'vreau sƒÉ beau', children: [
                {img: 'water.jpg', text: 'apƒÉ'},
                {img: 'milk.jpg', text: 'lapte'},
                {img: 'tea.jpg', text: 'ceai'},
                {img: 'juice.png', text: 'suc'},
            ]
        },
        {
            text: 'vreau', img: 'want.jpg', children: [
                {img: 'bombons.png', text: 'bomboane'},
                {img: 'outside.png', text: 'sƒÉ merg'},
                {img: 'sleep.jpg', text: 'sƒÉ dorm'},
                {img: 'mom.jpg', text: 'la mama'},
                {img: 'dad.jpg', text: 'la tata'},
                {img: 'emma.jpg', text: 'Emma'},
                {img: 'hug.jpg', text: 'pupƒÉ'},
                {img: 'bath.jpg', text: 'baie'},
                {img: 'wc.jpg', text: 'toaleta'},
                {img: 'music.jpg', text: 'muzica'},
                {img: 'book.png', text: 'carte'},
                {img: 'toys.png', text: 'jucarii'},
                {img: 'board.png', text: 'placa'},
                {img: 'd.png', text: 'D'},
                {img: 'phone.png', text: 'telefon'},
                {img: 'my-room.png', text: 'acasa'},

            ]
        },
        {
            img: 'feel.jpg', text: "simt", children: [
                {img: 'happy.png', text: 'fericit'},
                {img: 'sad.png', text: 'trist'},
                {img: 'cold.jpg', text: 'mi-e rece'},
                {img: 'hot.jpg', text: 'mi-e cald'},
                {img: 'angry.png', text: 'suparat'},
                {img: 'wet.jpg', text: 'ud'},
                {
                    img: 'auch.jpg', text: 'ma doare', children: [
                        {img: 'hand.png', text: 'mana'},
                        {img: 'foot.png', text: 'picior'},
                        {img: 'head.png', text: 'cap'},
                        {img: 'teeth.png', text: 'dinti'},
                        {img: 'throat.png', text: 'gat'},
                        {img: 'ear.png', text: 'ureche'},
                        {img: 'belly.png', text: 'burta'},
                    ]
                },
            ]
        },
        {img: 'enough.jpg', text: 'gata'},
        {img: 'white.jpg'},
        {img: 'white.jpg'},
        {img: 'white.jpg'},
        {img: 'white.jpg'},
        {img: 'white.jpg'},
        {img: 'white.jpg'},
        {img: 'white.jpg'},
        {img: 'white.jpg'},
        {img: 'white.jpg'},
        {img: 'white.jpg'},
        {img: 'yes.jpg', text: 'da'},
        {img: 'no.jpg', text: 'nu'},
    ];
    const homeItem = {img: 'home.png', children: topItems};

    function addHome(items) {
        for (let item of items) {
            if (item.children) {
                addHome(item.children);
            }
        }
        while (items.length < itemsPerPage - 1) {
            items.push({img: 'white.jpg'});
        }
        items.push(homeItem);
    }

    addHome(topItems);

    const canvasE = document.getElementById('canvas');

    function checkImages(items) {
        for (let item of items) {
            canvasE.innerHTML = '';
            if (item.children) {
                checkImages(item.children);
            }
        }
    }

    function setCanvas(items) {
        canvasE.innerHTML = '';
        for (let item of items) {
            let img = document.createElement('img');
            img.src = item.img;
            img.onclick = function () {
                if (item.text) prompt(item.text);
                if (item.children) setCanvas(item.children);
                // else setCanvas(topItems);
            }
            canvasE.appendChild(img);
        }
    }

    setCanvas(topItems);


    // remove spaces between <img> <img>
    const imagesE = document.getElementById('images');
    imagesE.innerHTML = imagesE.innerHTML.replace(/>\s+</g, '><');
    for (let img of imagesE.children) {
        img.onclick = function () {
            prompt(img.alt);
        }
    }

    const textE = document.getElementById('text');

    function prompt(text) {
        textE.value += ' ' + text;
    }

    function stergeCuvant() {
        let pozitieUltimSpatiu = textE.value.lastIndexOf(" ");
        textE.value = textE.value.substring(0, pozitieUltimSpatiu);
        clearTimeout(timerDown);
    }

    var timerDown = null;

    function onStergeDown() {
        timerDown = setTimeout(() => {
            textE.value = "";
        }, 500);
    }

    document.onfullscreenchange = function () {
        if (!document.fullscreenElement) {
            let button = document.querySelector('#fullscreen-button');
            button.style.display = 'inline';
            button.focus();
        }
    }

    function speakText() {
        if (!'speechSynthesis' in window) {
            alert("Sorry, your browser does not support speech synthesis.");
            return;
        }
        const speech = new SpeechSynthesisUtterance(text);
        const text = document.getElementById("text").value;

        // Optional: Customize voice, pitch, and rate
        speech.voice = window.speechSynthesis.getVoices()[0]; // Select the first available voice
        speech.pitch = 1; // Default is 1 (range is 0 to 2)
        speech.rate = 0.8;  // Default is 1 (range is 0.1 to 10)

        window.speechSynthesis.speak(speech);
    }
</script>
</body>
</html>
